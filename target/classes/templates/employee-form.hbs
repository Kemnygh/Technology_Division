{{#partial "content"}}
    {{#if editEmployee}}
        <div class="form-div">
            <h1 class="form-title">Edit this Task!</h1>
            <form action="/employees/{{employee.id}}" method="post" class="form">
                <div class="mb-3 input-div">
                    <label for="first_name" class="form-label">Edit First name</label>
                    <input class="form-control border-bottom input-field" id="first_name" name="first_name" type="text" value="{{employee.first_name}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="last_name" class="form-label">Edit Last name</label>
                    <input class="form-control border-bottom input-field" id="last_name" name="last_name" type="text"  value="{{employee.last_name}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="staff_id" class="form-label">Edit Staff ID</label>
                    <input class="form-control border-bottom input-field" id="staff_id" name="staff_id" type="text" value="{{employee.staff_id}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="phone_no" class="form-label">Edit Phone Number</label>
                    <input class="form-control border-bottom input-field" id="phone_no" name="phone_no" type="text" value="{{employee.phone_no}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="email" class="form-label">Edit Email</label>
                    <input class="form-control border-bottom input-field" id="email" name="email" type="email" value="{{employee.email}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="role" class="form-label">Edit Job Role</label>
                    <input class="form-control border-bottom input-field" id="role" name="role" type="text" value="{{employee.role}}" required>
                </div>
                <div class="mb-3 input-div">
                    <input class="form-control border-bottom input-field" id="updated" name="updated" type="hidden" value="{{employee.updated}}" required>
                </div>
                <script>
                    function time() {
                    let dt = new Date().toLocaleString()
                    document.getElementById('updated').value = dt
                    }
                </script>
                <div class="mb-3 input-div">
                    <label for="position_id" class="form-label">Position</label>
                    <select id="position_id" name="position_id" class="form-select">
                        {{#each positions}}
                            <option value="{{id}}">{{name}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="mb-3 input-div">
                    <label for="department_id" class="form-label">Change Department</label>
                    <select id="department_id" name="department_id" class="form-select">
                        {{#each departments}}
                            <option value="{{id}}">{{name}}</option>
                        {{/each}}
                    </select>
                </div>
                <p class="text-center">Don't see the right <span style="font-weight: bold">Department?</span><a href="/departments/new"> + New Department</a><br>
                    Or <br>the right <span style="font-weight: bold">Position?</span><a href="/positions/new"> + New Position</a></p>
                <button type="submit" class="btn btn-success" onclick="time()">Submit</button>
            </form>
        </div>
    {{else}}
        <div class="form-div">
        <h3 class="text-center form-title">Add Employee</h3>
            <form action="/employees" method="post" class="form">
                {{#if departments}}
                    {{#if positions}}
                    <div class="mb-3 input-div">
                        <label for="first_name" class="form-label">First name</label>
                        <input class="form-control border-bottom input-field" id="first_name" name="first_name" type="text" placeholder="Enter first name" required>
                    </div>
                    <div class="mb-3 input-div">
                        <label for="last_name" class="form-label">Last name</label>
                        <input class="form-control border-bottom input-field" id="last_name" name="last_name" type="text" placeholder="Enter last name" required>
                    </div>
                    <div class="mb-3 input-div">
                        <label for="staff_id" class="form-label">Staff ID</label>
                        <input class="form-control border-bottom input-field" id="staff_id" name="staff_id" type="text" placeholder="Enter staff ID" required>
                    </div>
                    <div class="mb-3 input-div">
                        <label for="phone_no" class="form-label">Phone Number</label>
                        <input class="form-control border-bottom input-field" id="phone_no" name="phone_no" type="text" placeholder="Enter Mobile Number" required>
                    </div>
                    <div class="mb-3 input-div">
                        <label for="email" class="form-label">Email</label>
                        <input class="form-control border-bottom input-field" id="email" name="email" type="email" placeholder="Enter email" required>
                    </div>
                    <div class="mb-3 input-div">
                        <label for="role" class="form-label">Job Role</label>
                        <input class="form-control border-bottom input-field" id="role" name="role" type="text" placeholder="Enter role e.g. Network Analyst" required>
                    </div>
                    <div class="mb-3 input-div">
                        <input class="form-control border-bottom input-field" id="created_at" name="created_at" type="hidden" required>
                    </div>
                    <script>
                        function created() {
                        let dt = new Date().toLocaleString()
                        document.getElementById('created_at').value = dt
                        }
                    </script>
                    <div class="mb-3 input-div">
                        <label for="position_id" class="form-label">Position</label>
                        <select id="position_id" name="position_id" class="form-select">
                            {{#each positions}}
                                <option value="{{id}}">{{name}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div class="mb-3 input-div">
                        <label for="department_id" class="form-label">Department</label>
                        <select id="department_id" name="department_id" class="form-select">
                            {{#each departments}}
                                <option value="{{id}}">{{name}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <p class="text-center">Don't see the right <span style="font-weight: bold">Department?</span><a href="/departments/new"> + New Department</a><br>
                        Or <br>the right <span style="font-weight: bold">Position?</span><a href="/positions/new"> + New Position</a></p>
                {{else}}
                    <p class="text-center"> Add a Position before you adding an Employee <a href="/positions/new">+ New Position</a> </p>
                    {{/if}}
                {{else}}
                    <p class="text-center"> Add a Department before you adding an Employee <a href="/departments/new">+ New Department</a> </p>
                {{/if}}
                    <button type="submit" class="btn btn-success mb-3" onclick="created()">Submit</button>
            </form>
            {{#if errors}}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="bi bi-exclamation-triangle-fill"></i><strong>  Error!</strong> {{errors}}. Confirm that the Staff ID, phone number and/or email address are unique.
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {{/if}}
            {{#if success}}
                <div class="alert alert-success alert-dismissible fade show" role="alert" style="margin: auto;">
                    <i class="bi bi-check-circle-fill"></i><strong>  Success!</strong> {{success}}.<a href="/">  Go to Home <i class="bi bi-house-fill"></i></a>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {{/if}}
        </div>
    {{/if}}
{{/partial}}

{{> layout.hbs}}